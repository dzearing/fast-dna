import fs from "fs";
import path from "path";
import { ComponentStateColorPalette, parseColorHexRGB } from "@microsoft/fast-colors";

function createColorPalette(baseColor) {
    return new ComponentStateColorPalette({
        baseColor,
    }).palette.map((color) => color.toStringHexRGB().toUpperCase());
}

const outpath = path.resolve(__dirname, "../src/default-palette.ts");
const packageName = process.cwd().slice(process.cwd().lastIndexOf("/") + 1)

/**
 * Define default palette base colors
 */
const accentBaseColor = "#0078D4";
const neutralBaseColor = "#808080";

/**
 * Define palettes from base colors
 */
const neutralPalette = createColorPalette(parseColorHexRGB(neutralBaseColor));
const accentPalette = createColorPalette(parseColorHexRGB(accentBaseColor));

const file =
`/**
 * DO NOT EDIT THIS FILE DIRECTLY
 * This file generated by fast-components-styles-msft/generate-palettes.js
 */
export const accentBaseColor: string = ${JSON.stringify(accentBaseColor)};
export const neutralBaseColor: string = ${JSON.stringify(neutralBaseColor)};
export const neutralPalette: string[] = ${JSON.stringify(neutralPalette, null, 4)};
export const accentPalette: string[] = ${JSON.stringify(accentPalette, null, 4)};
`;

fs.writeFile(outpath, file, (error) => {
    if (error) {
        throw error;
    } else {
        console.log("\nPalette data written to", outpath, "\n")
    }
})
